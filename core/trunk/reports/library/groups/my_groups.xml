<?xml version="1.0" encoding="UTF-8"?>
<report title="My groups" description="Lists groups which you belong to.">
  <query website_filter_field="g.website_id">
    SELECT #columns#
    FROM groups g
    JOIN groups_users gu ON gu.group_id = g.id AND gu.deleted = false AND gu.user_id = #currentUser#
    LEFT JOIN groups_users guc ON guc.group_id=g.id AND guc.deleted=false
    #joins#
    WHERE g.deleted = false
  </query>
  <order_bys>
    <order_by>g.id</order_by>
  </order_bys>
  <params>
    <param name="currentUser" display="Current User ID" description="Current user's warehouse ID." datatype="text" />  
  </params>
  <columns>
    <column name="id" display="ID" sql="g.id" datatype="integer" in_count="true" />
    <column name="name" display="Name" sql="g.title" datatype="text" />
    <column name="description" display="Description" sql="g.description" datatype="text" />
    <column name="administrator" display="Admin" sql="gu.administrator" datatype="boolean" />
    <column name="members" display="Members" sql="count(guc.id)" datatype="integer" aggregate="true" />
  </columns>
</report>
