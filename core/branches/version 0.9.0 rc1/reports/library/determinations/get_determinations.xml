<?xml version="1.0" encoding="UTF-8"?>

<report title="Get determinations" description="Return items from the determination table based on the given parameters">
  <query website_filter_field="lw.website_id">
    SELECT #columns#
    FROM determinations d
    JOIN taxa_taxon_lists ttl ON ttl.id = d.taxa_taxon_list_id
    JOIN taxa t ON t.id = ttl.taxon_id
    WHERE d.occurrence_id = #occurrence_id#
    GROUP BY d.created_on, t.taxon, d.person_name
    ORDER BY d.created_on desc, t.taxon, d.person_name
  </query>
  <params>
    <param name='occurrence_id' display='Occurrence ID' description='ID of the occurrence to return determinations for.' datatype="integer"/>
  </params>
  <columns>
    <column name='species' display='Species' sql='t.taxon' datatype='text'/>
    <column name='person_name' display='Determiner' sql='d.person_name' datatype='text'/>
    <column name='date' display='Date' sql='d.created_on' datatype='date'/>
  </columns>
</report>