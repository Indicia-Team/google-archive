#summary A tutorial for building a basic data entry page using Indicia.

= Introduction =

This tutorial takes you step by step through the process of building a basic data entry page using Indicia and PHP. It assumes you are able to build a basic HTML page, and a little knowledge of PHP is useful though not essential.


= Register the website =
  #	Login to the Indicia Core as a user with administrative privileges.
  #	Select Admin\Websites from the menu at the top.
  #	Click the New Website button.
  #	Enter the title of your website, e.g. “Tutorial”.
  #	Fill in the URL of the website you will be setting up, e.g. http://www.mytutorial.com
  #	Specify a password which will be used to authenticate that data posted to the server actually came from your website, and enter it again in the Retype Password box to confirm it.
  #	Click the Save button.
  #	Later in this tutorial you will need the ID of the website you have just created. To obtain this, click the Edit link next to the website in the grid, then click the Show/Hide Metadata link in the bottom right of the page. Note the ID in the box that appears.

= Register the website administrator =
  #	Select Lookup Lists\People from the menu.
  #	Click the New Person button.
  #	Enter the details of the person who will act as the administrator of the website you are building, including their email address.
  #	Select Admin\Users from the menu.
  #	Find the person record you just created, then click Edit User Details in that row.
  #	In the User’s Details, enter a password for the user and confirm it in the Repeat Password control. 
  #	Note the Username that has been generated or change it if required.
  #	In the Role within CORE Module box, select SiteController which allows them to log in to the Core Module.
  #	In the Website Roles list, select Admin in the drop down box next to the Website you created.
  #	Save the page then select Me\Logout from the menu.

= Create a species list to record against =
  #	First, login as the user you created in the previous section.
  #	Select Lookup Lists\Taxon Groups from the menu.
  #	Click the New Taxon Group button and specify the title of a taxonomic group you would like to create a species list for, then save it.
  #	Select Lookup Lists\Species Lists from the menu.
  #	Click the New Species List button.
  #	Enter a list title, e.g. “Dorset Butterflies”.
  #	Enter a description for your list.
  #	In the Owned By box, select the website that this list will be used for.
  #	Press the Submit button.
  #	Select the Edit option next to the new species list you have created.
  #	Select the “View the contents of this list” link beneath the details of the list.
  #	Click the New Taxon button.
  #	Specify the Taxon Name, the Language for this term, and select the Taxon Group you previously created. All other fields are optional, but enter Common Names and Synonyms one on each line if required. Click the Submit button then repeat this for each taxon you require.
  #	Finally, in order to use this list on a data entry page, you need to know the ID of the list. To do this, select Lookup Lists\Species Lists from the menu and select the Edit option for the new list you created. Now click the Show/Hide Metadata link, and note the ID that is displayed in the box that appears.

= Build a data entry page =
  #	This part of the tutorial assumes you have access to a webserver that is running PHP 5 and are able to create web pages on the server. You should have a folder ready to contain the web pages on this server. Also, throughout this section of the tutorial, the website running the Indicia Core will be referred to as `<core_url>`. Make sure you replace this with the real URL!
  #	The building of PHP pages using Indicia is simplified by using the supplied Data Entry Helper class. This is a static class (so you don’t have to create an instance of it to use it) which outputs ready made pieces of HTML and JavaScript into your page. To use this, copy the following files from an installation of Indicia into the folder your web page will be accessed from on the server:
  * modules\demo\data_entry\data_entry_helper.php
  * modules\demo\data_entry\helper_config.php.example
  #	Remove the .example from the end of the latter file’s filename. Edit the helper_config.php file and change the value for the base_url setting to the URL of the folder which contains your Indicia installation (i.e. the same as you are replacing `<core_url>` with).
  #	Now, create a basic, blank PHP web page using your site template but with no content.
  #	Although you can take full control of the style sheets if you like, for this tutorial we will use some example styles provided. So, insert the following entries into the `<head>` section of of the page:
{{{
<link rel="stylesheet" href="<core_url>/media/css/ui.datepicker.css" type="text/css" media="screen">
<link rel="stylesheet" href="<core_url>/media/css/jquery.autocomplete.css" />
}}}
  #	You’ll also need to link in some JavaScript files. Paste the following into your page, inside the `<head>` section just beneath the stylesheet links:
{{{
<script type="text/javascript" src="<core_url>/media/js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="<core_url>/media/js/ui.core.js"></script>
<script type="text/javascript" src="<core_url>/media/js/ui.datepicker.js"></script>
<script type="text/javascript" src="<core_url>/media/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="<core_url>/media/js/json2.js"></script>
}}}
  #	Now, just inside your <head> element, paste in the following:
{{{
<?php	include 'data_entry_helper.php'; ?>
}}}
  #	You will need an HTML form in which to place the data entry controls. Paste this into your web page to create the basic form container. You need to replace websiteID with the ID of the website you created earlier, and websitePassword with its password. Make sure you use the website password, not your user password!
{{{
<form method="post">
<?php
	// Get authorisation tokens to update and read from the Core.
	echo data_entry_helper::get_auth(websiteID, 'websitePassword');
	$readAuth = data_entry_helper::get_read_auth(websiteID, 'websitePassword');
?>
<input type='hidden' id='website_id' name='website_id' value='websiteId' />


</form>
<?php echo data_entry_helper::dump_javascript(); ?>
}}}
  #	Ok, you’ve now got a form “Indicia enabled” and ready to put controls into. Note the last call, to dump_javascript? That is because the data entry helper will dynamically build the required script for your page. Rather than inserting it higgledy piggledy into the html, it keeps things tidier if it is all kept in one place. The next task is to add a simple text box to allow selection of a species from your species list. Remember the ID of the species list we created earlier? Paste the following code into your page, just above the `</form>`, and replace ID with your ID.
{{{
<label for='actaxa_taxon_list_id'>Species</label>
<?php echo data_entry_helper::autocomplete('taxa_taxon_list_id', 'taxa_taxon_list', 'taxon', 'id', $readAuth + array('taxon_list_id' => 'ID')); ?>
<br />
}}}
  #	Now, try loading your page to check it works. With any luck you have a handy little auto-complete control for your species list, from just the lines of code above.