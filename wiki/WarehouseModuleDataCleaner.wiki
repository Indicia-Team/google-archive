#summary The Data Cleaner module

= The Data Cleaner module =

The Data Cleaner module is optional and lets you turn on automated verification checks for incoming data. The Data Cleaner module:

  # Runs when the scheduled_tasks.php link on the warehouse is called - see [ScheduledTaskSetup Setting up the scheduled_tasks].
  # Finds all new and modified records.
  # Runs a series of rule checks against the data. Each rule check is effectively an SQL query statement defined in a sub-module enabled on the warehouse.
  # When violations are identified, comments are created against the record which detail the violation. The comments are flagged so that it is clear they are auto-generated by the data cleaner sub-module which generated them. Any previous comments from the same module are removed so that comments do not accumulate if a record is re-verified.

== Enabling the Data Cleaner ==

To enable the Data Cleaner module insert a link to the `MODPATH.'data_cleaner'` module into the application/config/config.php file. You will also need to enable at least one of the following modules depending on which rules you want to apply:

  * data_cleaner_identification_difficulty
  * data_cleaner_period
  * data_cleaner_period_within_year
  * data_cleaner_without_polygon
  * data_cleaner_designated_taxa

After saving the config file, search for and delete any files containing _menu_ in the filename in the application/cache folder to ensure that the changes are immediately visible. 

== Importing rules ==

Rules are imported from files created in the format defined for the NBN Record Cleaner. See [http://www.nbn.org.uk/Tools-Resources/Recording-Resources/NBN-Record-Cleaner/Creating-verification-rules.aspx Creating Rule Files] for information on this format. The easiest way to use rules is to get Indicia to download the rules existing files as used by the NBN Record Cleaner itself. To do this, log in to the warehouse with administrator privileges then visit *Admin > Verification Rules* on the menu. At the bottom of the page there is a list of the available verification rule servers, each containing the rules provided by a particular organisation. Check one of the boxes under *Server owner* and click *Upload rule files*. Indicia may take a minute or two to download and process the files, but you only do this once as they can be automatically applied to any new data. 

Make sure you set the *Enable auto-verification checks* flag on the website details in the warehouse for the website registrations you want to participate in the automated verification.